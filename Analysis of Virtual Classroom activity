# Analysis of VC

import pandas as pd
import tkinter as tk
from tkinter import filedialog
import matplotlib.pyplot as plt


root = tk.Tk()
root.title("Analiza Clase Virtuale")
root.geometry("400x200")

mega_mind =[]
da_count = 0
nu_count = 0
part_count = 0
hash = {}


def load_data():
    file_path = filedialog.askopenfilename(title="Select data file", filetypes=[("CSV files", "*.csv")])
    if file_path:
        data = pd.read_csv(file_path)
        data = data.dropna()
        rows = data.values.tolist()
        for row in rows:
            mega_mind.append(row[1:-1])
            print(row[1:-1])
    

    else:
        raise ValueError("No file selected")

def overall():
    for i in mega_mind:
        for j in i:
            if j == "Da":
                global da_count
                da_count += 1
            if j == "Nu":
                global nu_count
                nu_count += 1
            if j == "Partial":
                global part_count
                part_count += 1
    print(f"Da: {da_count}, Nu: {nu_count}, Par»õial: {part_count}")
    performance = [da_count, nu_count, part_count]
    labels = ['Da', 'Nu', 'Partial']
    plt.pie(performance, labels=labels, autopct='%1.1f%%')
    plt.title("Perfromanta la Clasele Virtuale")
    plt.xlabel("Categories")
    plt.ylabel("Count")
    plt.show()

def individual():
    for i in mega_mind:
        da_count_temp = 0
        entry_count = -1
        for j in i:
            entry_count += 1
            if j == "Da":
                da_count_temp += 1
            if j == "Partial":
                da_count_temp += 0.5
            else:
                continue
        hash[i[0]] = str(round((10/da_count_temp)*100)) + "%"
    print(hash)

button  = tk.Button(root, text="Load Data", command=load_data)
button.pack(pady=20)

button_pl = tk.Button(root, text='Overall Results', command=lambda: overall())
button_pl.pack(pady=20)

button_ind = tk.Button(root, text='Individual Results', command=lambda: individual())
button_ind.pack(pady=20)

root.mainloop()
